## 目的

このリポジトリは，社内で散発的に発生している「意味のないコミットメッセージ（例: `first`, `fix` 等）」「内容の希薄な PR」「不統一なブランチ名」「未整備のプルリク運用」に起因するワークフロー混乱を解消するために作成した．

短期的には開発効率とレビュー品質の改善，長期的にはコード履歴の信頼性・保守性向上を目的とする．最終到達点としてはすべてのプロジェクトを[インナーソース](#インナーソースinnersourceについて)化することを目指す．

なおこのリポジトリは PR を歓迎している．改善案等あれば積極的に提案されたい．

## このリポジトリ内の表現

この文書におけるキーワード「しなければならない (MUST)」「してはならない (MUST NOT)」「要求されている (REQUIRED)」「することになる (SHALL)」「することはない(SHALL NOT)」「する必要がある (SHOULD)」「しないほうがよい (SHOULD NOT)」「推奨される (RECOMMENDED)」「してもよい (MAY)」「選択できる (OPTIONAL)」は [RFC 2119](https://www.ietf.org/rfc/rfc2119.txt) ([JPNIC 日本語訳](https://www.nic.ad.jp/ja/tech/ipa/RFC2119JA.html)) で述べられているように解釈されるべきものである．

## 現状の問題

- コミットメッセージが自由すぎて履歴から変更意図が読み取れない．
- ブランチ命名規則が無く，どのブランチが何を目的に作られたか不明瞭．
- PR に必要な情報（背景，動作確認手順，関連 Issue）が不足しているためレビューが困難．
- ブランチ保護・レビュー必須が整備されておらず，質の担保が困難．

これらにより，バグの追跡・レビュー・責任範囲の特定が困難になっている．

## 目標

1. コミット単位で変更意図が明確になること
2. ブランチ名だけで作業内容の種類と範囲が推測できること
3. PR レビューの質が向上し，保守性が向上すること

## ソリューション

以下を組み合わせて運用する．以下に概要を示すが，[CONTRIBUTING.md](./CONTRIBUTING.md) も必読である．

- コミットメッセージ規約: [Conventional Commits](https://www.conventionalcommits.org/ja/v1.0.0/) (MUST)
- ブランチ命名規則: [Conventional Branch](https://conventional-branch.github.io/) (MUST)
- PR テンプレートの使用: 問題点，変更点，確認手順，関連 Issue，スクリーンショット欄を必須化 (MUST)
- 自動チェック: commitlint + pre-commit + GitHub Actions (lint, tests, build, security scan) (MUST)
- マージ戦略: Squash and merge (コミット履歴を整理)，または Merge commit は明確な理由がある場合のみ (MUST)
- ブランチ保護ルール: `main`/`master` は直接プッシュ禁止，レビュー 1 人以上，CI 成功必須 (SHOULD)

これらの運用はプロジェクトの規模や性質に応じて柔軟に調整することを推奨する．しかしながら基本的に本提案を守ることを優先されたい．

---

## インナーソース（InnerSource）について

定義: 社内向けにオープンソースの考え方を持ち込み，社内のプロジェクトやライブラリをチーム横断で再利用・共同開発できるようにする運用を指す．外部公開はせず組織内での「公開リポジトリ」として扱う．

期待効果:

- 重複実装の削減，再利用性の向上
- ナレッジ共有による品質向上とバグ早期発見
- 担当者不在時の継続的な保守性向上
- 開発者のスキル伝播とコラボレーション促進

導入上の簡易ルール（本リポジトリへの適用例）:

- README・API ドキュメントを充実させ，使い方・目的を明確にする
- CONTRIBUTING.md を用意し，貢献フロー（Issue → PR → レビュー → マージ）を明示する
- CODEOWNERS とラベルで責任範囲を明確化する（公開モジュールのメンテナ担当を指定）
- 再利用を前提に設計し，パッケージ化・バージョン管理（SemVer）を徹底する
- セキュリティ・ライセンス方針を定め，外部依存や機密情報の取り扱いを禁止する
- 小さな貢献でも歓迎する文化を作るため，PR テンプレート・レビューチェックリストを用意する
- 利用実績やコントリビューション数などの簡易メトリクスを定期的にレビューする

運用の提案:

1. この README と合わせて CONTRIBUTING.md，CODEOWNERS，パッケージの公開ルールを整備する
2. 社内向けに「このモジュールはインナーソースとして公開している」旨を告知し，貢献方法を共有する短いハンズオンを実施する
3. 初期はコアチームでレビューポリシーを厳しめに設定し，徐々にコミュニティ運用へ移行する

インナーソース化は技術的施策だけでなく文化作りが重要である．本リポジトリのコミット・PR 規約と合わせて推進されたい．
